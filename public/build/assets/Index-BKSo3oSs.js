import{r as i,j as e,H as pe,a as B,L as R}from"./app-BJnhCF1I.js";import{A as be,S as X}from"./app-layout-8DgFkWqX.js";import{S as se}from"./search-BOuGxXYO.js";import{C as U}from"./x-DiUud3ai.js";import{U as W}from"./users-DNk9OTJ6.js";import{T as ke}from"./trending-up-D28HMN9N.js";import{C as je}from"./clock-CO4qMT2P.js";import{M as ye}from"./map-pin-Cv9Shrl1.js";import{C as Ne}from"./chart-column-Bw56JHtq.js";import{F as we}from"./file-text-trBYnmvo.js";/* empty css            */import"./button-BYoSY79q.js";import"./index-DaDxUzXp.js";import"./index-2Qrhn8Ej.js";import"./index-I2wjaJJZ.js";import"./index-DqItBxrk.js";const ve=[{title:"Dashboard",href:"/dashboard"},{title:"Check-in System",href:"/admin/checkin"}];function He({events:ae,filters:G,statistics:f}){const[M,Q]=i.useState(G.date||new Date().toISOString().split("T")[0]),[z,J]=i.useState(G.status||""),[P,ne]=i.useState(ae),[m,v]=i.useState(""),[o,w]=i.useState([]),[_,Y]=i.useState(!1),[D,p]=i.useState(!1),[j,y]=i.useState(-1),[_e,E]=i.useState({type:null,message:""}),[x,I]=i.useState(null),F=new Date().toISOString().split("T")[0],L=t=>{const s=new Date(t),a=new Date(F),n=new Date(a);n.setDate(n.getDate()+1);const r=new Date(a);return r.setDate(r.getDate()-1),t===F?{label:"Hari Ini",color:"text-green-600 bg-green-50 border-green-200",canCheckIn:!0}:t===n.toISOString().split("T")[0]?{label:"Besok",color:"text-orange-600 bg-orange-50 border-orange-200",canCheckIn:!1}:t===r.toISOString().split("T")[0]?{label:"Kemarin",color:"text-gray-600 bg-gray-50 border-gray-200",canCheckIn:!1}:s>a?{label:`${Math.ceil((s.getTime()-a.getTime())/864e5)} hari lagi`,color:"text-blue-600 bg-blue-50 border-blue-200",canCheckIn:!1}:{label:`${Math.ceil((a.getTime()-s.getTime())/864e5)} hari lalu`,color:"text-gray-600 bg-gray-50 border-gray-200",canCheckIn:!1}},V=t=>t===F,c=(t,s,a)=>{const n=`toast_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;I({id:n,type:t,message:s,visible:!0,data:a}),setTimeout(()=>{I(r=>r?{...r,visible:!1}:null),setTimeout(()=>{I(null)},300)},4e3)},re=(t,s=!0)=>{ne(a=>a.map(n=>{if(n.id===t){const r=s?n.check_in_count+1:Math.max(0,n.check_in_count-1),d=n.registration_count>0?Math.round(r/n.registration_count*100*10)/10:0;return{...n,check_in_count:r,attendance_rate:d}}return n}))},[l,N]=i.useState({...f,attendance_rate:f.total_registrations_today>0?Math.round(f.total_checkins_today/f.total_registrations_today*100):0,isPending:!1}),[b,S]=i.useState({pending:0,rollbacks:[],animations:{}}),u=i.useRef(null),C=i.useRef(null),O=i.useRef(null),q=i.useRef(new Set);i.useEffect(()=>(C.current&&clearTimeout(C.current),m.trim().length>=2?C.current=setTimeout(()=>{K()},300):m.trim().length===0&&(w([]),p(!1),y(-1),E({type:null,message:""})),()=>{C.current&&clearTimeout(C.current)}),[m]);const $=i.useCallback(()=>{requestAnimationFrame(()=>{if(u.current&&document.activeElement!==u.current){const t=u.current.selectionStart;u.current.focus(),t!==null&&setTimeout(()=>{u.current&&u.current.setSelectionRange(t,t)},0)}})},[]);i.useEffect(()=>{_||$()},[_,$]),i.useEffect(()=>{D&&o.length>0&&$()},[D,$]),i.useEffect(()=>{const t=setInterval(()=>{me()},3e4);return()=>clearInterval(t)},[]),i.useEffect(()=>{N(t=>({...t,...f,attendance_rate:f.total_registrations_today>0?Math.round(f.total_checkins_today/f.total_registrations_today*100):0}))},[f]);const K=async()=>{var t;if(console.log("handleSearch called",{searchQuery:m}),!m.trim()||m.length<2){m.length>0&&m.length<2&&c("warning","Masukkan minimal 2 karakter untuk pencarian");return}Y(!0),w([]),p(!1),y(-1),E({type:null,message:""});try{const s=(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.content;if(!s){console.warn("CSRF token not found in meta tag"),c("error","Session error. Silakan refresh halaman dan coba lagi.");return}console.log("CSRF Token found:",s?"Yes":"No");const a=await fetch("/admin/checkin/search",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({query:m})}),n=await a.json();console.log("Search response:",n),a.ok?(w(n.registrations),p(n.registrations.length>0),await ie(n.registrations),n.registrations.length===0&&c("warning",`Tidak ditemukan peserta dengan kata kunci "${m}"`)):(console.error("Search failed:",a.status,n),a.status===419?c("error","CSRF token mismatch. Silakan refresh halaman dan login ulang."):a.status===401?c("error","Session expired. Silakan login ulang."):c("error",n.message||"Terjadi kesalahan saat mencari peserta"))}catch(s){console.error("Search error:",s),c("error","Terjadi kesalahan koneksi. Silakan coba lagi.")}finally{Y(!1)}},ie=async t=>{if(t.length===1){const s=t[0];if(s.ticket_number.toLowerCase()===m.toLowerCase()&&!s.is_checked_in){if(!V(s.event_date)){const r=L(s.event_date);c("warning",`Event "${s.event_title}" dijadwalkan untuk ${r.label.toLowerCase()}, tidak dapat check-in hari ini.`);return}console.log("Auto check-in for exact ticket match:",s.ticket_number),await A(s.id);return}}},le=()=>`rollback_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Z=(t,s)=>s>0?Math.round(t/s*100):0,oe=t=>{const s=le(),a={...l},n=a.total_checkins_today+1,r=Z(n,a.total_registrations_today);return N(d=>({...d,total_checkins_today:n,attendance_rate:r,isPending:!0})),S(d=>({pending:d.pending+1,rollbacks:[...d.rollbacks,{id:s,registrationId:t,originalCheckins:a.total_checkins_today,timestamp:Date.now()}],animations:{...d.animations,[s]:"success"}})),ee("success"),console.log("Optimistic update applied:",{rollbackId:s,newCheckins:n,newAttendanceRate:r,registrationId:t}),s},H=t=>{const s=b.rollbacks.find(a=>a.id===t);if(s){const a=Z(s.originalCheckins,l.total_registrations_today);N(n=>({...n,total_checkins_today:s.originalCheckins,attendance_rate:a,isPending:b.pending>1})),S(n=>({pending:Math.max(0,n.pending-1),rollbacks:n.rollbacks.filter(r=>r.id!==t),animations:{...n.animations,[t]:"rollback"}})),ee("rollback"),console.log("Rollback applied:",{rollbackId:t,restoredCheckins:s.originalCheckins,restoredAttendanceRate:a}),setTimeout(()=>{S(n=>({...n,animations:{...n.animations,[t]:null}}))},1e3)}else console.warn("Rollback data not found for ID:",t)},ce=t=>{const s=b.rollbacks.find(a=>a.id===t);S(a=>({pending:Math.max(0,a.pending-1),rollbacks:a.rollbacks.filter(n=>n.id!==t),animations:{...a.animations,[t]:null}})),N(a=>{const n=Math.max(0,b.pending-1),r={...a,isPending:n>0};return console.log("Optimistic update committed:",{rollbackId:t,rollbackData:s,newPendingCount:n,updatedStats:r}),r})},ee=t=>{document.querySelectorAll(".stats-card").forEach(a=>{a.classList.remove("animate-success","animate-rollback"),a.classList.add(`animate-${t}`),setTimeout(()=>{a.classList.remove(`animate-${t}`)},600)})},de=()=>{setTimeout(()=>{console.log("Starting background sync...",{pendingUpdates:b.pending}),fetch("/admin/checkin",{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(t=>t.json()).then(t=>{if(t.props&&t.props.statistics){const s=t.props.statistics;console.log("Fresh statistics received:",s),N(a=>({...a,...s,attendance_rate:s.total_registrations_today>0?Math.round(s.total_checkins_today/s.total_registrations_today*100):0,isPending:!1})),console.log("Background sync completed successfully")}}).catch(t=>{console.error("Background sync failed:",t),B.reload({only:["statistics"],preserveState:!0,preserveScroll:!0,onSuccess:s=>{var n;console.log("Fallback background sync completed");const a=(n=s.props)==null?void 0:n.statistics;a&&N(r=>({...r,...a,attendance_rate:a.total_registrations_today>0?Math.round(a.total_checkins_today/a.total_registrations_today*100):0,isPending:!1}))}})})},2e3)},me=()=>{const t=Date.now(),s=6e4;S(a=>({...a,rollbacks:a.rollbacks.filter(n=>t-n.timestamp<s)}))},A=async t=>{var n;if(q.current.has(t)){console.warn("Check-in already in progress for registration:",t);return}const s=o.find(r=>r.id===t);if(s&&!V(s.event_date)){const d=L(s.event_date);c("warning",`Event "${s.event_title}" dijadwalkan untuk ${d.label.toLowerCase()}, tidak dapat check-in hari ini.`);return}q.current.add(t),E({type:null,message:""});const a=oe(t);try{const r=(n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.content;if(!r){console.warn("CSRF token not found in meta tag for check-in"),H(a),E({type:"error",message:"Session expired. Silakan refresh halaman dan coba lagi."});return}console.log("Check-in CSRF Token found:",r?"Yes":"No");const d=new Promise((g,h)=>setTimeout(()=>h(new Error("Request timeout")),1e4)),fe=fetch("/admin/checkin/check-in",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({registration_id:t})}),T=await Promise.race([fe,d]),k=await T.json();if(console.log("Check-in response:",k),T.ok){if(ce(a),c("success",`${k.data.participant_name} berhasil check-in! 🎉`,{participant_name:k.data.participant_name,ticket_number:k.data.ticket_number,event_title:k.data.event_title}),w(g=>g.map(h=>h.id===t?{...h,is_checked_in:!0,check_in_time:k.data.check_in_time}:h)),s){const g=P.find(h=>h.title===s.event_title);g&&re(g.id,!0)}console.log("Check-in successful, refreshing statistics..."),setTimeout(()=>{N(g=>{const h={...g,isPending:!1};return console.log("Final statistics after check-in:",h),h})},500),de(),setTimeout(()=>{var g;v(""),w([]),p(!1),y(-1),(g=u.current)==null||g.focus()},3e3)}else H(a),console.error("Check-in failed:",T.status,k),T.status===419?c("error","CSRF token mismatch. Silakan refresh halaman dan login ulang."):T.status===401?c("error","Session expired. Silakan login ulang."):c("error",k.message||"Gagal melakukan check-in")}catch(r){console.error("Check-in error:",r),H(a);const d=r instanceof Error&&r.message==="Request timeout";c("error",d?"Koneksi timeout. Check-in dibatalkan, silakan coba lagi.":"Terjadi kesalahan koneksi. Silakan coba lagi.")}finally{q.current.delete(t),console.log("Check-in completed for registration:",t)}},xe=t=>{if(!D||o.length===0){t.key==="Enter"&&(t.preventDefault(),K());return}switch(t.key){case"ArrowDown":t.preventDefault(),y(s=>s<o.length-1?s+1:s);break;case"ArrowUp":t.preventDefault(),y(s=>s>0?s-1:s);break;case"Enter":if(t.preventDefault(),j>=0&&j<o.length){const s=o[j];s.is_checked_in||A(s.id)}else o.length===1&&!o[0].is_checked_in&&A(o[0].id);break;case"Escape":t.preventDefault(),v(""),w([]),p(!1),y(-1);break;case"Tab":if(j>=0&&j<o.length){t.preventDefault();const s=o[j];v(s.ticket_number),p(!1)}else o.length>0&&(t.preventDefault(),v(o[0].ticket_number),p(!1));break}};i.useEffect(()=>{const t=s=>{O.current&&!O.current.contains(s.target)&&u.current&&!u.current.contains(s.target)&&(p(!1),y(-1))};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const ue=t=>{switch(t){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";default:return""}},ge=t=>{switch(t){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";default:return""}},he=()=>{B.get("/admin/checkin",{date:M,status:z},{preserveState:!0,preserveScroll:!0})},te=t=>t>=80?"text-green-600 bg-green-50 border-green-200":t>=60?"text-orange-600 bg-orange-50 border-orange-200":"text-red-600 bg-red-50 border-red-200";return l.attendance_rate,i.useEffect(()=>{},[l,b]),e.jsxs(be,{breadcrumbs:ve,children:[e.jsx(pe,{title:"Check-in System - Festival Tahuri Admin"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-6 overflow-x-auto",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-orange-600 to-red-500 bg-clip-text text-transparent",children:"Check-in System"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Kelola check-in peserta untuk semua talkshow"})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 border-2 border-green-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-green-600"}),"Check-in Peserta"]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{ref:u,type:"text",placeholder:"Ketik nomor tiket (BIFT001T) atau nama peserta...",value:m,onChange:t=>v(t.target.value),onKeyDown:xe,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",disabled:_,autoComplete:"off"}),D&&o.length>0&&e.jsx("div",{ref:O,className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:o.map((t,s)=>{const a=L(t.event_date),n=a.canCheckIn;return e.jsx("div",{className:`p-3 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors ${s===j?n?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200":n?"hover:bg-green-50":"hover:bg-orange-50"}`,onClick:()=>{!t.is_checked_in&&n?A(t.id):n||c("warning",`Event "${t.event_title}" dijadwalkan untuk ${a.label.toLowerCase()}, tidak dapat check-in hari ini.`),p(!1)},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:t.full_name}),e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded font-medium",children:t.ticket_number})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:t.event_title}),e.jsxs("span",{className:`px-2 py-1 text-xs rounded border font-medium ${a.color}`,children:["📅 ",a.label]})]}),t.event_time&&e.jsxs("div",{className:"text-xs text-gray-500",children:["🕐 ",t.event_time," WIT"]})]}),e.jsx("div",{className:"ml-3",children:t.is_checked_in?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded font-medium",children:"✅ Sudah Check-in"}):n?e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 text-xs rounded font-medium",children:"⏳ Klik untuk Check-in"}):e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs rounded font-medium",children:"⚠️ Bukan Hari Ini"})})]})},t.id)})})]}),e.jsxs("button",{onClick:K,disabled:_||!m.trim(),className:"px-6 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2 min-w-[140px]",children:[e.jsx(se,{className:"w-5 h-5"}),_?"Mencari...":"Cari & Check-in"]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 text-sm text-green-700 mt-3",children:[e.jsxs("p",{children:["💡 ",e.jsx("strong",{children:"Tips:"})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-0 sm:space-x-4 sm:flex",children:[e.jsx("span",{children:"• Ketik nomor tiket lengkap untuk auto check-in"}),e.jsx("span",{children:"• Gunakan ↑↓ untuk navigasi, Enter untuk pilih"}),e.jsx("span",{children:"• Tab untuk auto-complete, Esc untuk batal"})]})]}),x&&e.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-md p-4 border rounded-lg shadow-lg transition-all duration-300 transform ${x.visible?"translate-y-0 opacity-100":"-translate-y-2 opacity-0"} ${ge(x.type)}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-lg",children:ue(x.type)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium",children:x.message}),x.data&&e.jsxs("div",{className:"text-sm mt-1 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:x.data.participant_name})," - ",x.data.ticket_number]}),e.jsxs("p",{className:"text-xs opacity-75",children:["Event: ",x.data.event_title]})]})]}),x.type==="success"&&e.jsx("div",{className:"text-2xl animate-bounce",children:"🎉"}),e.jsx("button",{onClick:()=>I(t=>t?{...t,visible:!1}:null),className:"text-gray-400 hover:text-gray-600 ml-2",children:"✕"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"stats-card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-700 font-medium text-sm",children:"Talkshow Hari Ini"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900",children:l.total_events_today}),e.jsx("p",{className:"text-blue-600 text-sm",children:"Total talkshow"})]}),e.jsx(U,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"stats-card bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-700 font-medium text-sm",children:"Registrasi Hari Ini"}),e.jsx("p",{className:"text-3xl font-bold text-orange-900",children:l.total_registrations_today}),e.jsx("p",{className:"text-orange-600 text-sm",children:"Total peserta"})]}),e.jsx(W,{className:"w-8 h-8 text-orange-500"})]})}),e.jsx("div",{className:`stats-card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-2xl p-6 transition-all duration-300 ${l.isPending?"stats-pending animate-pending":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 font-medium text-sm",children:"Check-in Hari Ini"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-3xl font-bold text-green-900",children:l.total_checkins_today}),l.isPending&&e.jsx("div",{className:"success-indicator text-green-600",children:e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-green-600 text-sm",children:"Sudah hadir"}),b.pending>0&&e.jsxs("span",{className:"px-2 py-1 bg-green-200 text-green-800 text-xs rounded-full font-medium",children:["+",b.pending," pending"]})]})]}),e.jsx(X,{className:`w-8 h-8 text-green-500 transition-all duration-300 ${l.isPending?"scale-110":""}`})]})}),e.jsx("div",{className:`stats-card bg-gradient-to-br border-2 rounded-2xl p-6 transition-all duration-300 ${te(l.attendance_rate)} ${l.isPending?"stats-pending animate-pending":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Tingkat Kehadiran"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-3xl font-bold",children:[l.attendance_rate,"%"]}),l.isPending&&e.jsx("div",{className:"success-indicator",children:e.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-pulse"})})]}),e.jsx("p",{className:"text-sm",children:l.isPending?"Memperbarui...":"Rata-rata hari ini"})]}),e.jsx(ke,{className:`w-8 h-8 transition-all duration-300 ${l.isPending?"scale-110":""}`})]})})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border border-orange-100 rounded-xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(U,{className:"w-4 h-4 inline mr-2"}),"Tanggal Event"]}),e.jsx("input",{type:"date",value:M,onChange:t=>Q(t.target.value),className:"w-full px-3 sm:px-4 py-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Event"}),e.jsxs("select",{value:z,onChange:t=>J(t.target.value),className:"w-full px-3 sm:px-4 py-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Tidak Aktif"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsxs("button",{onClick:he,className:"flex-1 sm:flex-none px-4 sm:px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2 text-sm sm:text-base",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Filter"}),e.jsx("span",{className:"sm:hidden",children:"Filter"})]}),e.jsx("button",{onClick:()=>{Q(new Date().toISOString().split("T")[0]),J(""),B.get("/admin/checkin")},className:"flex-1 sm:flex-none px-4 sm:px-6 py-3 border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium rounded-lg transition-colors text-sm sm:text-base",children:"Reset"})]})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-orange-100 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Event pada ",new Date(M).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})}),P.length>0?e.jsx("div",{className:"grid gap-4 p-4 sm:p-6 max-h-96 overflow-y-auto",children:P.map(t=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6 hover:border-orange-200 hover:bg-orange-50/30 transition-all duration-300",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-3",children:[e.jsx("h4",{className:"text-lg sm:text-xl font-semibold text-gray-900 break-words",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded font-medium",children:t.event_code}),e.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${t.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.status==="active"?"Aktif":"Tidak Aktif"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(je,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.time?`${t.time} WIT`:"Waktu belum ditentukan"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ye,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 sm:col-span-2 lg:col-span-1",children:[e.jsx(W,{className:"w-4 h-4 flex-shrink-0"}),e.jsxs("span",{children:[t.registration_count," peserta terdaftar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm text-blue-700 font-medium",children:"Terdaftar"}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-blue-900",children:t.registration_count})]})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-2 sm:p-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm text-green-700 font-medium",children:"Check-in"}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-green-900",children:t.check_in_count})]})}),e.jsx("div",{className:`border rounded-lg p-2 sm:p-3 ${te(t.attendance_rate)}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Hadir"}),e.jsxs("span",{className:"text-lg sm:text-xl font-bold",children:[t.attendance_rate,"%"]})]})})]})]}),e.jsxs("div",{className:"flex flex-row lg:flex-col gap-2 lg:ml-6 w-full lg:w-auto",children:[e.jsxs(R,{href:`/admin/registrations?event_id=${t.id}`,className:"flex-1 lg:flex-none px-3 sm:px-4 py-2 bg-green-500 hover:bg-green-600 text-white text-xs sm:text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Check-in Manual"}),e.jsx("span",{className:"sm:hidden",children:"Check-in"})]}),e.jsxs(R,{href:`/admin/seminars/${t.id}`,className:"flex-1 lg:flex-none px-3 sm:px-4 py-2 border border-gray-300 text-gray-700 hover:bg-gray-50 text-xs sm:text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Detail Event"}),e.jsx("span",{className:"sm:hidden",children:"Detail"})]})]})]})},t.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(U,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Tidak ada event"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Tidak ada event pada tanggal yang dipilih"}),e.jsx(R,{href:"/admin/seminars/create",className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white font-medium rounded-lg transition-colors",children:"Buat Talkshow Baru"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aksi Cepat Check-in"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs(R,{href:"/admin/registrations",className:"p-4 bg-white border border-blue-200 rounded-lg hover:border-blue-300 hover:shadow-md transition-all duration-200 text-center group",children:[e.jsx(W,{className:"w-8 h-8 text-blue-500 mx-auto mb-2 group-hover:scale-110 transition-transform"}),e.jsx("p",{className:"font-medium text-gray-900",children:"Kelola Registrasi"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Lihat dan kelola peserta"})]}),e.jsxs(R,{href:"/admin/seminars",className:"p-4 bg-white border border-orange-200 rounded-lg hover:border-orange-300 hover:shadow-md transition-all duration-200 text-center group",children:[e.jsx(we,{className:"w-8 h-8 text-orange-500 mx-auto mb-2 group-hover:scale-110 transition-transform"}),e.jsx("p",{className:"font-medium text-gray-900",children:"Kelola Talkshow"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Atur Talkshow dan peserta"})]})]})]})]})]})}export{He as default};
