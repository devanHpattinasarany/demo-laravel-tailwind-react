import{r as x,j as e,H as D,L as f,a as m}from"./app-BtF519Xp.js";import{A as I,S as T}from"./app-layout-CsA_ofcI.js";import{T as j}from"./trash-2-DatVHQfi.js";import{U as b}from"./users-wzvUwBme.js";import{C as N}from"./x-C8gvmjLS.js";import{U as y}from"./user-check-BFSXCBZP.js";import{S as A}from"./search-za1YwpzB.js";import{F as E}from"./filter-BwT-LpJ5.js";import{M as L,P as M}from"./phone-zpZs65ic.js";import{E as U}from"./eye-BheVQW-i.js";import{U as H}from"./user-x-CXat5jXJ.js";/* empty css            */import"./button-DZCbpUGI.js";import"./index-Dzrbm8kf.js";import"./index-B2NiHxzL.js";import"./index-kV6dSLvt.js";import"./index-j2f3bk-U.js";const K=[{title:"Dashboard",href:"/dashboard"},{title:"Registrations",href:"/admin/registrations"}];function ae({registrations:t,events:v,filters:n,statistics:r}){const[i,o]=x.useState(n.search||""),[c,h]=x.useState(n.event_id||""),[p,g]=x.useState(n.status||""),[a,d]=x.useState([]),u=()=>{m.get("/admin/registrations",{...n,search:i,event_id:c,status:p},{preserveState:!0,preserveScroll:!0})},w=()=>{o(""),h(""),g(""),m.get("/admin/registrations",{},{preserveState:!0,preserveScroll:!0})},k=()=>{a.length===t.data.length?d([]):d(t.data.map(s=>s.id))},S=s=>{d(l=>l.includes(s)?l.filter(F=>F!==s):[...l,s])},_=s=>{a.length!==0&&confirm("Are you sure you want to delete selected registrations?")&&m.post("/admin/registrations/bulk-action",{action:s,registration_ids:a},{onSuccess:()=>d([])})},C=s=>s.check_in?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:[e.jsx(y,{className:"w-3 h-3"}),"Checked In"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full font-medium",children:[e.jsx(H,{className:"w-3 h-3"}),"Not Checked In"]}),R=r.total_registrations>0?Math.round(r.total_checked_in/r.total_registrations*100):0;return e.jsxs(I,{breadcrumbs:K,children:[e.jsx(D,{title:"Registration Management - Festival Tahuri Admin"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4 sm:p-6 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-orange-600 to-red-500 bg-clip-text text-transparent",children:"Registration Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Kelola semua registrasi peserta event"})]}),a.length>0&&e.jsx("div",{className:"flex gap-2 sm:gap-3",children:e.jsxs("button",{onClick:()=>_("delete"),className:"px-3 sm:px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-lg transition-colors flex items-center gap-2 text-sm",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsxs("span",{className:"hidden sm:inline",children:["Delete (",a.length,")"]}),e.jsx("span",{className:"sm:hidden",children:a.length})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200 rounded-xl sm:rounded-2xl p-3 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-700 font-medium text-xs sm:text-sm",children:"Total Registrasi"}),e.jsx("p",{className:"text-xl sm:text-3xl font-bold text-blue-900",children:r.total_registrations})]}),e.jsx(b,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-xl sm:rounded-2xl p-3 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 font-medium text-xs sm:text-sm",children:"Total Check-in"}),e.jsx("p",{className:"text-xl sm:text-3xl font-bold text-green-900",children:r.total_checked_in})]}),e.jsx(T,{className:"w-6 h-6 sm:w-8 sm:h-8 text-green-500"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200 rounded-xl sm:rounded-2xl p-3 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-700 font-medium text-xs sm:text-sm",children:"Hari Ini"}),e.jsx("p",{className:"text-xl sm:text-3xl font-bold text-orange-900",children:r.registrations_today})]}),e.jsx(N,{className:"w-6 h-6 sm:w-8 sm:h-8 text-orange-500"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200 rounded-xl sm:rounded-2xl p-3 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700 font-medium text-xs sm:text-sm",children:"Tingkat Hadir"}),e.jsxs("p",{className:"text-xl sm:text-3xl font-bold text-purple-900",children:[R,"%"]})]}),e.jsx(y,{className:"w-6 h-6 sm:w-8 sm:h-8 text-purple-500"})]})})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border border-orange-100 rounded-xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("input",{type:"text",placeholder:"Cari nama peserta, email, NIK, nomor tiket...",value:i,onChange:s=>o(s.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",onKeyPress:s=>s.key==="Enter"&&u()})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("select",{value:c,onChange:s=>h(s.target.value),className:"flex-1 sm:flex-none sm:min-w-[180px] px-3 sm:px-4 py-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[e.jsx("option",{value:"",children:"Semua Event"}),v.map(s=>e.jsxs("option",{value:s.id,children:[s.title," (",s.event_code,")"]},s.id))]}),e.jsxs("select",{value:p,onChange:s=>g(s.target.value),className:"flex-1 sm:flex-none sm:min-w-[140px] px-3 sm:px-4 py-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"checked_in",children:"Sudah Check-in"}),e.jsx("option",{value:"not_checked_in",children:"Belum Check-in"})]}),e.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[e.jsxs("button",{onClick:u,className:"flex-1 sm:flex-none px-4 sm:px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2 text-sm sm:text-base",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Filter"})]}),e.jsx("button",{onClick:w,className:"flex-1 sm:flex-none px-4 sm:px-6 py-3 border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium rounded-lg transition-colors text-sm sm:text-base",children:"Reset"})]})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border border-orange-100 rounded-xl overflow-hidden max-h-[600px] flex flex-col",children:t.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto flex-1 overflow-y-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-red-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 sm:px-6 py-3 sm:py-4 text-left",children:e.jsx("input",{type:"checkbox",checked:a.length===t.data.length,onChange:k,className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"})}),e.jsx("th",{className:"px-3 sm:px-6 py-3 sm:py-4 text-left text-xs sm:text-sm font-semibold text-gray-900",children:"Peserta"}),e.jsx("th",{className:"hidden md:table-cell px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Event"}),e.jsx("th",{className:"hidden lg:table-cell px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Kontak"}),e.jsx("th",{className:"px-3 sm:px-6 py-3 sm:py-4 text-left text-xs sm:text-sm font-semibold text-gray-900",children:"Status"}),e.jsx("th",{className:"px-3 sm:px-6 py-3 sm:py-4 text-left text-xs sm:text-sm font-semibold text-gray-900",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.data.map(s=>e.jsxs("tr",{className:"hover:bg-orange-50/30 transition-colors",children:[e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:e.jsx("input",{type:"checkbox",checked:a.includes(s.id),onChange:()=>S(s.id),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"})}),e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm sm:text-base",children:s.full_name}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["NIK: ",s.nik]}),e.jsx("p",{className:"text-xs text-orange-600 font-medium",children:s.ticket_number}),e.jsx("p",{className:"text-xs text-gray-500 md:hidden mt-1",children:s.event.title})]})}),e.jsx("td",{className:"hidden md:table-cell px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.event.title}),e.jsx("p",{className:"text-sm text-gray-500",children:s.event.event_code}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[e.jsx(N,{className:"w-3 h-3"}),new Date(s.event.date).toLocaleDateString("id-ID")]})]})}),e.jsx("td",{className:"hidden lg:table-cell px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate max-w-[200px]",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(M,{className:"w-4 h-4"}),s.phone]})]})}),e.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:[C(s),s.check_in&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Check-in: ",new Date(s.check_in.created_at).toLocaleString("id-ID")]})]}),e.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(f,{href:`/admin/registrations/${s.id}`,className:"p-1 sm:p-2 text-orange-600 hover:text-orange-700 hover:bg-orange-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(U,{className:"w-4 h-4"})}),!s.check_in&&e.jsx("button",{onClick:()=>{confirm("Are you sure you want to delete this registration?")&&m.delete(`/admin/registrations/${s.id}`)},className:"p-1 sm:p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Registration",children:e.jsx(j,{className:"w-4 h-4"})})]})})]},s.id))})]})}),t.links&&e.jsx("div",{className:"px-4 sm:px-6 py-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",t.from," to ",t.to," of ",t.total," results"]}),e.jsx("div",{className:"flex space-x-1",children:t.links.map((s,l)=>e.jsx(f,{href:s.url||"#",className:`px-3 py-2 text-sm rounded-md ${s.active?"bg-orange-500 text-white":s.url?"text-gray-700 hover:bg-gray-200":"text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},l))})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No registrations found"}),e.jsx("p",{className:"text-gray-500",children:"No registrations match your current filters."})]})})]})]})}export{ae as default};
