import{r as i,j as e,H as k,L as A,a as u}from"./app-BtF519Xp.js";import{A as C,S}from"./app-layout-CsA_ofcI.js";import{A as E}from"./arrow-left-BYA33Tap.js";import{F as D}from"./filter-BwT-LpJ5.js";import{C as m}from"./x-C8gvmjLS.js";import{U as T}from"./users-wzvUwBme.js";import{T as c}from"./trending-up-DzQ_0aXA.js";import{M as F}from"./map-pin-B324Yecf.js";import{c as b}from"./button-DZCbpUGI.js";/* empty css            */import"./index-Dzrbm8kf.js";import"./index-B2NiHxzL.js";import"./index-kV6dSLvt.js";import"./index-j2f3bk-U.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M5 12h14",key:"1ays0h"}]],j=b("Minus",L);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],f=b("TrendingDown",R),M=[{title:"Dashboard",href:"/dashboard"},{title:"Reports",href:"/admin/reports"},{title:"Event Summary",href:"/admin/reports/event-summary"}];function W({reportData:t,filters:a,events:y}){var g;const[l,x]=i.useState(a.date_from||""),[n,o]=i.useState(a.date_to||""),[d,h]=i.useState(((g=a.event_ids)==null?void 0:g.map(s=>s.toString()))||[]),N=()=>{const s={};l&&(s.date_from=l),n&&(s.date_to=n),d.length>0&&(s.event_ids=d.map(r=>parseInt(r))),u.get("/admin/reports/event-summary",s,{preserveState:!0})},v=()=>{x(""),o(""),h([]),u.get("/admin/reports/event-summary",{},{preserveState:!0})},w=s=>s>=80?e.jsx(c,{className:"w-4 h-4 text-green-600"}):s>=60?e.jsx(j,{className:"w-4 h-4 text-orange-600"}):e.jsx(f,{className:"w-4 h-4 text-red-600"}),_=s=>s>=80?"text-green-600 bg-green-50 border-green-200":s>=60?"text-orange-600 bg-orange-50 border-orange-200":"text-red-600 bg-red-50 border-red-200",p=s=>new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"});return e.jsxs(C,{breadcrumbs:M,children:[e.jsx(k,{title:"Event Summary Report - Festival Tahuri Admin"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4 sm:p-6 overflow-x-auto",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(A,{href:"/admin/reports",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(E,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-orange-600 to-red-500 bg-clip-text text-transparent",children:"Event Summary Report"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive overview of all event performance"})]})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-orange-100 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Report Filters"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",value:l,onChange:s=>x(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",value:n,onChange:s=>o(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specific Events"}),e.jsx("select",{multiple:!0,value:d,onChange:s=>h(Array.from(s.target.selectedOptions,r=>r.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 h-20",children:y.map(s=>e.jsxs("option",{value:s.id,children:[s.title," (",s.event_code,")"]},s.id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl/Cmd to select multiple"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs("button",{onClick:N,className:"px-6 py-2 bg-orange-500 hover:bg-orange-600 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"Apply Filters"]}),e.jsx("button",{onClick:v,className:"px-6 py-2 border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium rounded-lg transition-colors",children:"Clear All"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200 rounded-xl sm:rounded-2xl p-3 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-700 font-medium text-xs sm:text-sm",children:"Total Events"}),e.jsx("p",{className:"text-xl sm:text-3xl font-bold text-blue-900",children:t.summary.total_events})]}),e.jsx(m,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-xl sm:rounded-2xl p-3 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 font-medium text-xs sm:text-sm",children:"Total Registrations"}),e.jsx("p",{className:"text-xl sm:text-3xl font-bold text-green-900",children:t.summary.total_registrations})]}),e.jsx(T,{className:"w-6 h-6 sm:w-8 sm:h-8 text-green-500"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200 rounded-xl sm:rounded-2xl p-3 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700 font-medium text-xs sm:text-sm",children:"Total Check-ins"}),e.jsx("p",{className:"text-xl sm:text-3xl font-bold text-purple-900",children:t.summary.total_check_ins})]}),e.jsx(S,{className:"w-6 h-6 sm:w-8 sm:h-8 text-purple-500"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200 rounded-xl sm:rounded-2xl p-3 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-700 font-medium text-xs sm:text-sm",children:"Avg Attendance"}),e.jsxs("p",{className:"text-xl sm:text-3xl font-bold text-orange-900",children:[Math.round(t.summary.average_attendance),"%"]})]}),e.jsx(c,{className:"w-6 h-6 sm:w-8 sm:h-8 text-orange-500"})]})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-orange-100 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Event Details"})}),t.events.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-red-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 sm:px-6 py-3 sm:py-4 text-left text-xs sm:text-sm font-semibold text-gray-900",children:"Event"}),e.jsx("th",{className:"hidden md:table-cell px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Date & Location"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 sm:py-4 text-left text-xs sm:text-sm font-semibold text-gray-900",children:"Capacity"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 sm:py-4 text-left text-xs sm:text-sm font-semibold text-gray-900",children:"Registrations"}),e.jsx("th",{className:"hidden lg:table-cell px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Check-ins"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 sm:py-4 text-left text-xs sm:text-sm font-semibold text-gray-900",children:"Attendance"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.events.map((s,r)=>e.jsxs("tr",{className:"hover:bg-orange-50/30 transition-colors",children:[e.jsx("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm sm:text-base",children:s.title}),e.jsx("p",{className:"text-xs sm:text-sm text-orange-600 font-medium",children:s.code}),e.jsxs("div",{className:"md:hidden mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:p(s.date)}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.location})]})]})}),e.jsx("td",{className:"hidden md:table-cell px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-1",children:[e.jsx(m,{className:"w-4 h-4"}),p(s.date)]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate max-w-[150px]",children:s.location})]})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.capacity}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.available_slots," available"]})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.registrations}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(s.registrations/s.capacity*100,100)}%`}})})]})}),e.jsxs("td",{className:"hidden lg:table-cell px-6 py-4 text-center",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.check_ins}),e.jsxs("p",{className:"text-sm text-gray-500",children:["of ",s.registrations]})]}),e.jsxs("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[w(s.attendance_rate),e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${_(s.attendance_rate)}`,children:[s.attendance_rate,"%"]})]}),e.jsx("div",{className:"lg:hidden mt-1 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:[s.check_ins," check-ins"]})})]})]},`event-summary-${s.code||s.title}-${r}`))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(m,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events found"}),e.jsx("p",{className:"text-gray-500",children:"No events match your current filters."})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Report Notes"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Data Accuracy"}),e.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[e.jsx("li",{children:"• All data is real-time from the database"}),e.jsx("li",{children:"• Attendance rates calculated from actual check-ins"}),e.jsxs("li",{children:["• Report generated on ",new Date().toLocaleString("id-ID")]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Legend"}),e.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(c,{className:"w-4 h-4 text-green-600"}),"High attendance (≥80%)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-orange-600"}),"Medium attendance (60-79%)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4 text-red-600"}),"Low attendance (<60%)"]})]})]})]})]})]})]})}export{W as default};
